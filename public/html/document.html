<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Api Endpoints</title>
    <link href="app/css/style.css" rel="stylesheet" />
    <script src="app/js/script.js" type="module"></script>
  </head>
  <body>
    <header>
      <h1>Project REST API Documentation</h1>
    </header>
    <div>
      <div class="wrapper">
        <ul id="ul-h">
          <li><a href="#users">Users</a></li>
          <li><a href="#auth">Auth</a></li>
          <li><a href="#menu">Menu</a></li>
          <li><a href="#route">Route</a></li>
          <li><a>Not Ready</a></li>
          <li><a>Not Ready</a></li>
        </ul>
        <div>
          <h2>Endpoints</h2>
        </div>
        <div class="title">
          <h3 id="users">Users</h3>
          <ul>
            <li>
              <strong>GET</strong> /api/users - Retrieve all users
              <p>Header:</p>
              <pre>
              Content-Type: application/json
              </pre>
              <p>Example Response:</p>
              <pre>
                {
                  "id": 14,
                  "username": "john_doe",
                  "password": "secret123",
                  "role": "customer",
                  "address": "Example ave 5",
                  "created_at": "2025-04-21T16:01:08.000Z",
                  "email": "",
                  "filename": ""
                },
              </pre>
              <button id="get-user">Try</button>
            </li>
            <li>
              <strong>GET</strong> /api/users/:id - Retrieve a user by ID
              <p>Header:</p>
              <pre>
              Content-Type: application/json
              </pre>
              <p>Example Response:</p>
              <pre>
                {
                  "id": 101,
                  "username": "matti",
                  "password": "$2b$10$rdUzxAcXahkFKPha89jMLedWGE1mYVlERZchxRG98ak69lB.IhWkG",
                  "role": "user",
                  "address": "Test Address",
                  "created_at": "2025-04-22T13:27:51.000Z",
                  "email": "matti.matti@Testi.Testi",
                  "filename": "file"
                }
              </pre>
              <button id="get-userId">Try</button>
            </li>
            <li>
              <strong>POST</strong> /api/users - Create a new user
              <p>Header:</p>
              <pre>
              Content-Type: application/json
              </pre>
              <p>Body:</p>
              <pre>
                {
                  "username": "Testi",
                  "email": "Testi@Testi.Testi",
                  "password": "Testi"
                  }

                  OR WITH FILE
                  
                  Content-Type: image/jpeg  
                  OR  
                  Content-Type: image/png

                  {  
                  "username": "bgadg",
                  "email": "gdagadgbgdabdgad@Testi.Testi",
                  "password": "badggbad",
                  "address": "Test Address"
                  "profilePicture": "image.jpg"
                }
              </pre>
              <p>Example Response:</p>
              <pre>
                {
                  "message": "User created successfully",
                  "user_id": 124,
                  "filename": "c3f9e28351eb8057a5646d09711fc56b",
                  "thumbnailPath": "uploads\\c3f9e28351eb8057a5646d09711fc56b_thumb.jpg"
                }
              </pre>
              <button id="post-user">Try</button>
            </li>
            <li>
              <strong>PUT</strong> /api/users/:id - Update a user by ID
              <p>Header:</p>
              <pre>
              Content-Type: application/json
              Authorization: Bearer "Token"
              </pre>
              <p>Body:</p>
              <pre>
                {
                  "username": "Testi",
                  "email": "updated.email@test.com",
                  "password": "newpassword",
                  "address": "Updated Address"
                }

                OR WITH FILE
                  
                Content-Type: image/jpeg  
                OR  
                Content-Type: image/png
                
                {  
                  "username": "Testi",
                  "email": "Testi@Testi.Testi",
                  "password": "Testi",
                  "address": "Testi"
                  "profilePicture": "image.jpg"
                }

              </pre>
              <p>Example Response:</p>
              <pre>
                {
                  "message": "User updated successfully"
                }
              </pre>
              <button id="put-userId">Try</button>
            </li>
            <li>
              <strong>DELETE</strong> /api/users/:id - Delete a user by ID
              <p>Header:</p>
              <pre>
              Content-Type: application/json
              Authorization: Bearer "ADMIN_TOKEN"
              </pre>
              <p>Example Response:</p>
              <pre>
                {
                  "message": "User deleted successfully"
                }
              </pre>
              <button id="delete-user">Try</button>
            </li>
          </ul>
        </div>
        <div class="title">
          <h3 id="auth">Auth</h3>
          <ul>
            <li>
              <strong>POST</strong> /api/auth/login - Login a user
              <p>Header:</p>
              <pre>
              Content-Type: application/json
              </pre>
              <p>Body:</p>
              <pre>
                {
                  "username": "testuser",
                  "password": "password123"
                }
              </pre>
              <p>Example Response:</p>
              <pre>
                {
                  "user": {
                    "id": 109,
                    "username": "vvvvvv",
                    "password": "$2b$10$0SlzYQZR4e3kONcO0aZBmu0AG4I7HLVF0QyyxrxPtaxAT/AfCt4Ta",
                    "role": "user",
                    "address": "Testitie",
                    "created_at": "2025-04-22T14:20:30.000Z",
                    "email": "vvvvvv@example.com",
                    "filename": "file"
                  },
                  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxMDksInVzZXJuYW1lIjoidnZ2dnZ2Iiwicm9sZSI6InVzZXIiLCJpYXQiOjE3NDUzMzE3NTUsImV4cCI6MTc0NTMzNTM1NX0.VuRsp-fcywfGxTBaxFvy0a-WWMgKElY2wTT21swzmVA"
                }
              </pre>
              <button id="login-user">Try</button>
            </li>
            <li>
              <strong>POST</strong> /api/auth/register - Register a user to the
              server with a role (requires admin token)
              <p>Header:</p>
              <pre>
                Content-Type: application/json
                Authorization: Bearer "ADMIN_TOKEN"
              </pre>
              <p>Body:</p>
              <pre>
                {
                  "username": "dafhadf",
                  "email": "adfhadf@example.com",
                  "password": "adfhadf",
                  "address": "Testitie",
                  "role": "admin"
                }
              </pre>
              <p>Example Response:</p>
              <pre>
                {
                  "message": "User registered successfully"
                }
              </pre>
              <button id="register-user">Try</button>
            </li>
            <li>
              <strong>GET</strong> /api/auth/me - Get current user (requires
              token)
              <p>Header:</p>
              <pre>
                Authorization: Bearer "TOKEN"
                Content-Type: application/json
              </pre>
              <p>Example Response:</p>
              <pre>
                {
                  "user_id": 18,
                  "username": "testuser",
                  "iat": 1745329830,
                  "exp": 1745333430
                }
              </pre>
              <button id="auth-user">Try</button>
            </li>
            <li>
              <strong>GET</strong> /api/auth/logout - Logout a user
              <p>Example Response:</p>
              <pre>
                {
                  "message": "Logged out successfully"
                }
              </pre>
              <button id="logout-user">Try</button>
            </li>
          </ul>
        </div>
        <div class="title">
          <h3 id="menu">Menu</h3>
          <ul>
            <li>
              <strong>GET</strong> /api/menu - Retrieve all menu items
              <p>Header:</p>
              <pre>
        Content-Type: application/json
              </pre>
              <p>Example Response:</p>
              <pre>
        [
          {
            "id": 1,
            "name": "Pizza",
            "description": "Cheesy delight",
            "price": 12.5,
            "picture": "pizza.jpg",
            "categories": [1, 2],
            "diets": [3]
          }
        ]
              </pre>
              <button id="get-menu">Try</button>
            </li>

            <li>
              <strong>GET</strong> /api/menu/:id - Retrieve a single menu item
              by ID (with diets & categories)
              <p>Header:</p>
              <pre>
        Content-Type: application/json
              </pre>
              <p>Example Response:</p>
              <pre>
        {
          "id": 1,
          "name": "Pizza",
          "description": "Cheesy delight",
          "price": 12.5,
          "picture": "pizza.jpg",
          "categories": [1, 2],
          "diets": [3]
        }
              </pre>
              <button id="get-menu-id">Try</button>
            </li>

            <li>
              <strong>POST</strong> /api/menu - Create a new menu item
              <p>Header:</p>
              <pre>
        Content-Type: application/json
        Authorization: Bearer "ADMIN_TOKEN"
              </pre>
              <p>Body:</p>
              <pre>
        {
          "name": "prööt",
          "description": "döner kebab ateria",
          "price": 17.50,
          "picture": "Ruoka2",
          "categories": [1, 3],
          "diets": [6, 7]
        }
              </pre>
              <p>Example Response:</p>
              <pre>
        {
          "id": 5,
          "message": "Menu item created successfully"
        }
              </pre>
              <button id="post-menu">Try</button>
            </li>

            <li>
              <strong>PUT</strong> /api/menu/:id - Update a menu item
              <p>Header:</p>
              <pre>
        Content-Type: application/json
        Authorization: Bearer "ADMIN_TOKEN"
              </pre>
              <p>Body:</p>
              <pre>
        {
          "name": "kissa",
          "description": "kissa ateria",
          "price": 17.50,
          "picture": "Ruoka5",
          "categories": [1, 2, 3, 4],
          "diets": [1, 2, 3]
        }
              </pre>
              <p>Example Response:</p>
              <pre>
        {
          "message": "Menu item updated successfully"
        }
              </pre>
              <button id="put-menu-id">Try</button>
            </li>

            <li>
              <strong>DELETE</strong> /api/menu/:id - Delete a menu item
              <p>Header:</p>
              <pre>
        Content-Type: application/json
        Authorization: Bearer "ADMIN_TOKEN"
              </pre>
              <p>Example Response:</p>
              <pre>
        {
          "message": "Menu item deleted successfully"
        }
              </pre>
              <button id="delete-menu">Try</button>
            </li>
          </ul>
        </div>
        <div class="title">
          <h3 id="route">Route</h3>
          <ul>
            <li>
              <strong>GET</strong> /api/route/:olat/:olng/:lat/:lng - Retrieve
              route data
              <p>Header:</p>
              <pre>
                Content-Type: application/json
              </pre>
              <p>Example Response:</p>
              <pre>
                {
                  "pageInfo": {
                    "endCursor": "cursor_value"
                  },
                  "edges": [
                    {
                      "node": {
                        "start": "start_location",
                        "end": "end_location",
                        "legs": [
                          {
                            "duration": 600,
                            "mode": "BUS",
                            "distance": 5000,
                            "start": {
                              "scheduledTime": "2025-04-25T10:00:00Z"
                            },
                            "end": {
                              "scheduledTime": "2025-04-25T10:10:00Z"
                            },
                            "realtimeState": "SCHEDULED"
                          }
                        ],
                        "emissionsPerPerson": {
                          "co2": 0.5
                        }
                      }
                    }
                  ]
                }
              </pre>
              <button id="get-route">Try</button>
            </li>
            <li>
              <strong>GET</strong> /api/route/legs/:olat/:olng/:lat/:lng -
              Retrieve legs data
              <p>Header:</p>
              <pre>
                Content-Type: application/json
              </pre>
              <p>Example Response:</p>
              <pre>
                {
                  "decodedLegs": [
                    [
                      {
                        "startTime": "2025-04-25T10:00:00Z",
                        "endTime": "2025-04-25T10:10:00Z",
                        "mode": "BUS",
                        "duration": 600,
                        "distance": 5000,
                        "decodedPoints": [
                          [60.192059, 24.945831],
                          [60.193059, 24.946831]
                        ]
                      }
                    ]
                  ]
                }
              </pre>
              <button id="get-legs">Try</button>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <footer></footer>
  </body>
</html>
